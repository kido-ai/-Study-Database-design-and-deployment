[설계] 관계형 데이터베이스(Relational Database)의 주요 개념
===================================
## 1.1 데이터베이스의 역사
### 1.1.1 파일시스템의 위기 (데이터베이스의 등장 배경)
1. 데이터 종속성(data dependency)
> 데이터를 사용하는 프로그램의 구조가 데이터 구조(파일의 구조)의 영향을 받는다는 것을 의미한다.
  ex) 필드의 순서를 바꿔서 저장하려 할 때 이를 이용하는 모든 응용프로그램을 변경해야 하는 경우
2. 데이터 무결성(data integrity)의 침해
> 저장된 데이터의 내용이 본래 의도헀던 데이터의 형식, 범위를 준수해야 한다는 성질이다.
  ex) 숫자가 들어와야하는 필드에 문자가들어오는 경우
3. 데이터 중복성 (data redundancy)
> 같은 내용의 데이터가 여러 곳에 중복하여 저장되는 것
4. 데이터 불일치 (data incondsistency)
> 중복 저장된 데이터들이 서로 일치하지 않는 것
  ex) 이사를 해 주소가 변경된경우 같은 데이터의 사람의 주소가 2개가 되는 경우
5. 데이터 표준화의 어려움 (data standard)
> ex) 각 프로그램마다 사용하는 이름이 달라 프로그램을 이해하기도 어렵고 호환성에 문제가 되는 경우
6. 데이터 보안성의 결여 (data security)

### 1.1.2 데이터베이스의 등장
1. 데이터베이스 : 모아놓은 데이터의 집합
2. DBMS(DataBase Management System) 데이터베이스 관리 시스템: 데이터를 관리하는 S/W
3. 데이터베이스 시스템 : 데이터베이스에 기초해서 데이터나 정보를 처리하는 체제

#### 1.1.2.* 데이터베이스 시스템의 특징
1. 데이터 독립성(independency) 지원
> 사용자 혹은 응용프로그램이 직접 데이터베이스에 접근할 수 없고 DBMS를 통해서만 접근이 가능한 것
  데이터베이스 내에 있는 데이터의 물리적, 논리적 변화가 응용 시스템에 영향을 미치지 않도록 함으로써 독립성을 보장
2. 데이터 무결성 유지
> DBMS는 데이터베이스 내에 저장될 데이터에 대하여 데이터의 타입(type), 길이, 값의 범위 등에 대한 정보를 가지고 있으며,
  이를 위반하는 데이터가 들어올 경우 처리를 거절한다.
3. 데이터 중복성 및 불일치 최소화
> 응용프로그램에서 데이터에 접근한기 위해서는 DBMS가 가지고 있는 구조 정보에 따라야 하기 때문에 자연스럽게 표준화가 이루어질 수 있다.
4. 높은 데이터 보안성
> 사용자의 권한에 따라 데이터베이스 내에 있는 데이터에 대한 접근을 제한할 수 있다.
  일반적으로 저장된 데이터베이스는 DBMS를 통하지 않고는 외부에서 내용을 알아내기 매우 어렵다.
5. 데이터 공유(data sharing)의 용이성
> DBMS는 여러 사용자의 요구를 동시적으로 처리할 수 있는 능력을 가지고 있으며 데이터를 쉽게 이용할 수 있는 수단을 제공한다.

### 1.1.3 관계형 데이터베이스 모델
관계형 데이터 모델의 특징은 데이터가 테이블 형태로 표현되며, 사용자가 데이터를 쉽게 다룰 수 있도록 해주는 질의어(SQL)가 제공된다.

## 1.2 관계형 데이터베이스 용어
1. 릴레이션 (relation)
2. 속성 (attribute)
3. 튜플 (tuple)
4. 도메인 (domain)

- 용어 대비표

|E.F.Codd 용어|File 시스템 용어 |일반적인 용어|
|------|---|---|
|릴레이션(relation)|파일(file)|테이블(table)|
|속성(attribute)|필드(field)|열(column),컬럼|
|튜플(tuple)|레코드(record)|행(row)|

## 1.3 기본키와 외래키
1. 후보키 (candidate key)
> - 테이블에서 각 튜플을 구별하는 데 기준이 되는 하나 혹은 이상의 컬럼들의 집합.
> - 후보키는 테이블에 있는 각 튜플을 고유하게 식별할 수 있어야한다.
> - 후보키는 기본키와 대체키로 구분된다.
> - 하나의 테이블은 한개 이상의 후보키를 가질 수 있다.
> - 최소한의 컬럼 혹은 컬럼들의 집합으로 후보키를 구성해야 함
2. 기본키 (primary key)
> 후보키 중 튜플을 구분으로 사용하는 기준으로 선택된 것
3. 대체키 (alternate key)
> 후보키 중 튜플을 구분하는 기준으로 선택되지 않은 것
4. 복합키  
> 두 개 이상의 컬럼이 모여 키의 역할을 하는 경우
5. 외래키
> 테이블 간의 데이터의 일치와 무결성을 보증해주는 수단

### 1.3.* 참조 무결성 제약 조건
1. 외래키를 통해 두 테이블 간의 데이터 무결성을 유지하는 것
2. 무결성이 깨지는 걸 막기 위한 조치
> - 제한(restricted) : 삭제하려는 튜플의 PK값이 다른 테이블에 FK값으로 있는 경우 삭제연산 거절
> - 연쇄(cascade) : 참조 관계를 따라가면서 연쇄적으로 관련된 튜플 삭제
> - 널값으로 대체(nellify) : 삭제 연산을 수행 후 삭제된 값을 갖는 다른 테이블의 값을 null값으로 대체한다.

### 1.3.* 자기 참조 : 한 테이블이 자신을 참조하는 경우
## 1.4 뷰
1. 여러 테이블에 대하여 특정 사용자나 조직의 관점에서 데이터를 바라볼 수 있도록 해주는 수단
2. 뷰는 물리적인 데이터를 갖고 있지 않다 (테이블은 물리적인 데이터를 갖고 있음)
3. 뷰가 정의된 일반 테이블로부터 데이터를 가져다 보여주는 것
4. 뷰의 목적
> - 하나의 테이블에 대하여 여러 부서에서 서로 다른 관점으로 보기를 원할 때
> - 일반사용자에게는 감추어야 할 컬럼이 있을 때, 그것을 제외 하고 뷰를 만들어 제공함으로써 보안을 유지할 필요가 있을 때
> - 자주 사용하는 복잡한 질의문을 미리 뷰로 정의하여 두고 간편하게 쓰고자 할 때
5. 뷰 삽입 삭제
> - 튜플의 삽입이나 삭제가 테이블에 문제를 일으키지 않고 무결성 규칙을 만족한다 면 실행되고 문제가 된다면 DBMS는 실행시키지 않는다
> - 여러 테이블을 join하여 뷰를 만들 경우 뷰에 대해 삽입 삭제 불가능
> - 원래 테이블에 있던 값을 SUM, AVG등의 함수를 사용하여 가공한 뒤 뷰를 만들 경우 삽입 삭제 불가능
6. 뷰 SQL명령
```sql
1. 뷰생성
CREATE VIEW 뷰이름
AS SELECT 선택할 테이블의 속성
FROM 테이블명
WHERE 조건;

2. 질의
SELECT 속성명
FROM 뷰이름
WHERE 조건문;
```
## 1.5 SQL 언어
1. 기본적인 SQL문들은 표준화가 되어있다.
2. 비절차적 언어(non-procedural language)이다.
3. SQL 을 이용하는 두가지 방법
> - 대화식 SQL : DBMS회사에서 제공하는 유틸리티 프로그램을 이용하여 사용자가 직접 SQL문을 입력하고 실행결과를 확인하는 방식
> - 내장 SQL : SQL문이 C,Java와 같은 삭제 프로그램 안에 포함 되어져서 사용되는 방식
4. DBMS는 SQL문을 실행시 대소문자를 구분하지 않는다, 편의상 예약어는 대문자 테이블이나 컬럼은 소문자로 기술한다.
5. 명령어
> - SELECT : 테이블에 저장된 정보를 조회하는데 사용

```sql
SELECT 컬럼1,컬럼2
FROM 테이블명
WHERE 조건;
```
> - INSERT : 테이블에 튜플을 삽입할 때 사용
```sql
INSERT INTO 테이블명 (컬럼1,컬럼2,...)
VALUES (컬럼1값, 컬럼2값,...);

* 일부 컬럼을 생략하고 튜플 삽입 시 생략된 컬럼들의 값은 null
```
> - UPDATE : 테이블에 저장되어 있는 튜플의 값을 변경할 때 사용
```sql
UPDATE 테이블명
SET 컬럼명=변경 값
WHERE 조건;
```
> - DELETE : 테이블에 있는 튜플을 삭제할 때 사용
```sql
DELETE FROM 테이블명
WHERE 조건;
```
> - CREATE : 테이블, 뷰, 사용자 등 데이터베이스 내의 객체들을 생성하는데 사용
```sql
* 테이블 생성
CREATE TABLE 테이블이름(
컬럼명 데이터타입 널여부
PRIMARY KEY(PK로 지정할 컬럼명)
);
```
> - DROP : 데이터베이스 내의 객체를 제거
```sql
DROP TABLE 테이블이름;
DROP VIEW 뷰이름;
```
